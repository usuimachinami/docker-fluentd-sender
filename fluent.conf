<source>
  @id      in_tail_apache_access
  @type    tail
  @label   @raw
  format   apache2
  path     /fluentd/log/apache/access_log
  pos_file /fluentd/log/in_tail_apache_access.pos
  tag      sample.apache.access
  read_from_head true
  rotate_wait 60
</source>

<source>
  @id      in_tail_apache_error
  @type    tail
  @label   @raw
  format   apache_error
  path     /fluentd/log/apache/error_log
  pos_file /fluentd/log/in_tail_apache_error.pos
  tag      sample.apache.error
  read_from_head true
  rotate_wait 60
</source>

<source>
  @id      in_tail_laravel
  @type    tail
  @label   @raw
  format   monolog
  path     /fluentd/log/application/laravel.log
  pos_file /fluentd/log/in_tail_laravel.pos
  tag      sample.laravel
  read_from_head true
  rotate_wait 60
</source>

<label @raw>
  <match **>
    @type copy
    <store>
      @type relabel
      @label @out_forward
    </store>
    <store>
      @type relabel
      @label @stdout
    </store>
  </match>
</label>

<label @stdout>
  <match sample.**>
    @type stdout
  </match>
</label>

<label @out_forward>
  <match sample.**>
    @id    out_forward_aggregator
    @type  forward

    <server>
      name aggregator
      host 10.0.0.1
      port 24224
    </server>
  </match>
</label>